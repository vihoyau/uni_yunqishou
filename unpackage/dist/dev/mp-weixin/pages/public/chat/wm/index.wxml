<view><u-navbar vue-id="3fe77263-1" isFixed="{{true}}" borderBottom="{{false}}" background="{{({background:'#fff'})}}" backTextStyle="{{({color:'#333'})}}" backText="{{headTitle}}" bind:__l="__l"></u-navbar><view class="kefu_container"><block wx:if="{{errorTips}}"><view class="error_tips">{{errorTips}}</view></block><block wx:if="{{config.announcement&&errorTips==''}}"><view class="notice"><text>{{config.announcement}}</text><u-icon class="close_notice cuIcon-roundclose" vue-id="3fe77263-2" name="close-circle-fill" size="36" color="#e0e0e0" data-event-opts="{{[['^click',[['close_notice']]]]}}" bind:click="__e" bind:__l="__l"></u-icon></view></block><block wx:if="{{showLeaveMessage}}"><view class="leave_message"><form><view class="form-group"><label class="control-label" for="c-name"><view class="label-title">姓名</view><input class="form-control" type="text" name="name" id="c-name" placeholder-style="color:#B1B3C7" placeholder="请输入您的姓名" data-event-opts="{{[['input',[['__set_model',['$0','name','$event',[]],['leaveMessage']],['leave_message',['$event']]]]]}}" value="{{leaveMessage.name}}" bindinput="__e"/></label></view><view class="form-group"><label class="control-label" for="c-contact"><view class="label-title">联系方式</view></label><input class="form-control" type="text" name="contact" id="c-contact" placeholder-style="color:#B1B3C7" placeholder="请输入手机/QQ/微信号" data-event-opts="{{[['input',[['__set_model',['$0','contact','$event',[]],['leaveMessage']],['leave_message',['$event']]]]]}}" value="{{leaveMessage.contact}}" bindinput="__e"/></view><view class="form-group"><label class="control-label" for="c-message"><view class="label-title">留言内容</view></label><textarea class="form-control" style="height:240rpx;" rows="5" name="message" id="c-message" placeholder-style="color:#B1B3C7" placeholder="遇到的问题、所需服务、产品等，我们将尽快与您取得联系" data-event-opts="{{[['input',[['__set_model',['$0','message','$event',[]],['leaveMessage']],['leave_message',['$event']]]]]}}" value="{{leaveMessage.message}}" bindinput="__e"></textarea></view><button data-event-opts="{{[['tap',[['post_leave_message',['$event']]]]]}}" class="leave_success u-reset-button" bindtap="__e">确认留言</button></form></view></block><block wx:if="{{!showLeaveMessage}}"><view class="content_wrapper" style="{{'height:'+('calc(100vh - '+writeBottom+'px)')+';'}}"><view class="chat_wrapper" style="{{'height:'+('calc(100% - '+wrapperHeight+'px)')+';'}}"><block wx:if="{{showTool||selectModel}}"><view data-event-opts="{{[['tap',[['hideMask',['$event']]]]]}}" class="mask" bindtap="__e"></view></block><scroll-view scroll-y="{{true}}" scroll-with-animation="{{true}}" scroll-into-view="{{scrollIntoFooter}}" data-event-opts="{{[['scrolltoupper',[['wrapper_scrolltoupper',['$event']]]],['tap',[['tap_scroll_view',['$event']]]]]}}" bindscrolltoupper="__e" bindtap="__e"><block wx:for="{{messageList}}" wx:for-item="item" wx:for-index="index" wx:key="datetime"><block><view class="status"><text>{{item.datetime}}</text></view><block wx:for="{{item.data}}" wx:for-item="message" wx:for-index="__i0__" wx:key="id"><block><block wx:if="{{message.message_type==3}}"><view class="status"><text>{{message.message}}</text></view></block><view class="{{['message-item u-flex u-row-center u-col-center',message.sender=='me'?'message__right':'message__left']}}"><view class="head-img"><block wx:if="{{message.sender=='you'}}"><image class="head-img" src="{{$IMG_URL+'/imgs/chat/sys_head.png'}}" mode></image></block></view><block wx:if="{{message.message_type!=3}}"><view class="{{['bubble',message.sender=='me'?'me':'you']}}"><block wx:if="{{message.message_type==0}}"><u-parse vue-id="{{'3fe77263-3-'+index+'-'+__i0__}}" tagStyle="{{({img:'width:50rpx;height:50rpx;'})}}" html="{{message.message}}" data-event-opts="{{[['^imgtap',[['message_img_preview']]]]}}" bind:imgtap="__e" bind:__l="__l"></u-parse></block><block wx:if="{{message.message_type==2}}"><u-parse vue-id="{{'3fe77263-4-'+index+'-'+__i0__}}" html="{{'<a target=_blank href='+message.message+'>'+message.message+'</a>'}}" bind:__l="__l"></u-parse></block><block wx:if="{{message.message_type==1}}"><image src="{{message.message}}" mode="widthFix" data-event-opts="{{[['tap',[['preview_img',['$0'],[[['messageList','datetime',item.datetime],['data','id',message.id,'message']]]]]]]}}" bindtap="__e"></image></block><block wx:if="{{message.message_type==4||message.message_type==5}}"><view data-event-opts="{{[['tap',[['goDetail',['$0'],[[['messageList','datetime',item.datetime],['data','id',message.id,'message']]]]]]]}}" class="project_item" style="margin:0;" bindtap="__e"><image src="{{message.message.logo}}"></image><view class="project_item_body"><view><view class="project_item_title u-ellipsis-2">{{message.message.subject}}</view><block wx:if="{{message.message.note}}"><view class="project_item_note one-t" style="width:280rpx;margin-right:-20rpx;">{{message.message.note}}</view></block></view><view class="project_item_price"><block wx:if="{{message.message.price}}"><text class="price">{{message.message.price}}</text></block></view></view></view></block></view></block><view class="head-img"><block wx:if="{{message.sender=='me'}}"><image class="head-img" src="{{userInfo.avatar}}" mode></image></block></view></view></block></block></block></block><view style="height:300rpx;" id="wrapper_footer"></view></scroll-view></view><view class="write" style="{{'bottom:'+(writeBottom+'px')+';'}}"><block wx:if="{{!selectModel}}"><label class="widget_textarea"><textarea class="kefu_message" show-confirm-bar="{{false}}" fixed="{{true}}" focus="{{kefuMessageFocus}}" auto-height="{{true}}" maxlength="-1" cursor-spacing="{{14}}" placeholder="请输入你要咨询的问题" placeholder-style="color:#999" data-event-opts="{{[['blur',[['kefu_message_blur',['$event']]]],['input',[['__set_model',['','kefuMessage','$event',[]]],['textarea_input',['$event']]]],['focus',[['textarea_focus',['$event']]]]]}}" value="{{kefuMessage}}" bindblur="__e" bindinput="__e" bindfocus="__e"></textarea></label></block><view class="write_right" style="{{'flex:'+(showSendButton?3:2)+';'}}"><block wx:if="{{config.toolbar&&config.toolbar.expression}}"><text data-event-opts="{{[['tap',[['show_tool',['smiley']]]]]}}" class="toolbar_icon smiley" style="{{'background:'+('url('+config.toolbar.expression.icon_image+') no-repeat')+';'+('background-size:'+('100% 100%')+';')}}" bindtap="__e"></text></block><block wx:if="{{showSendButton}}"><button class="send_btn" hover-class="send_btn_hover" data-event-opts="{{[['tap',[['send_message',['$0',0],['kefuMessage']]]]]}}" bindtap="__e">发送</button></block><block wx:if="{{!showSendButton&&attachBackground}}"><text data-event-opts="{{[['tap',[['show_tool',['more']]]]]}}" class="toolbar_icon attach" style="{{'background:'+('url('+attachBackground+') no-repeat')+';'+('background-size:'+('100% 100%')+';')}}" bindtap="__e"></text></block></view></view><block wx:if="{{showTool}}"><view class="footer_div"><block wx:for="{{expressionData}}" wx:for-item="item" wx:for-index="index" wx:key="src"><block wx:if="{{showTool=='smiley'}}"><block><image src="{{item.src}}" data-event-opts="{{[['tap',[['select_expression',['$0'],[[['expressionData','src',item.src,'title']]]]]]]}}" bindtap="__e"></image></block></block></block><block wx:if="{{showTool=='more'}}"><view class="toolbar"><block wx:if="{{config.toolbar&&config.toolbar.order}}"><view data-event-opts="{{[['tap',[['show_select_model',['order']]]]]}}" class="toolbar_item" bindtap="__e"><image class="tool-img" src="{{config.toolbar.order.icon_image}}"></image><view>{{config.toolbar.order.title}}</view></view></block><block wx:if="{{config.toolbar&&config.toolbar.goods}}"><view data-event-opts="{{[['tap',[['show_select_model',['goods']]]]]}}" class="toolbar_item" bindtap="__e"><image class="tool-img" src="{{config.toolbar.goods.icon_image}}"></image><view>{{config.toolbar.goods.title}}</view></view></block><block wx:if="{{config.toolbar&&config.toolbar.file}}"><view data-event-opts="{{[['tap',[['upload_file',['$event']]]]]}}" class="toolbar_item" bindtap="__e"><image class="tool-img" src="{{config.toolbar.file.icon_image}}"></image><view>{{config.toolbar.file.title}}</view></view></block></view></block></view></block></view></block><block wx:if="{{selectModel}}"><view class="select_model"><view class="u-flex u-row-between u-col-center select_model--head"><view class="select-title-box"><view class="title-text">{{''+selectModelType[selectModel]+''}}</view><text class="title-line"></text></view><view data-event-opts="{{[['tap',[['show_select_model',[false]]]]]}}" class="close_select" bindtap="__e"><u-icon class="cuIcon-roundclose" vue-id="3fe77263-5" name="close-circle-fill" size="36" color="#e0e0e0" bind:__l="__l"></u-icon></view></view><view class="project_list"><block wx:if="{{selectModelData.length>0}}"><radio-group data-event-opts="{{[['change',[['select_done',['$event']]]]]}}" style="width:100%;" bindchange="__e"><block wx:for="{{$root.l0}}" wx:for-item="item" wx:for-index="index" wx:key="id"><label class="project_item"><image src="{{item.$orig.logo}}"></image><view class="project_item_body"><view><view class="project_item_title u-ellipsis-2">{{item.$orig.subject}}</view><block wx:if="{{item.$orig.note}}"><view class="project_item_note u-ellipsis-1" style="width:470rpx;">{{item.$orig.note}}</view></block></view><view class="project_item_price"><block wx:if="{{item.$orig.price}}"><text class="price">{{item.$orig.price}}</text></block></view></view><radio style="opacity:0;width:0;height:0;" value="{{item.g0}}" checked="{{false}}" hide="{{true}}"></radio></label></block></radio-group></block><block wx:if="{{selectModelData.length<=0}}"><view class="select_model_no_data"><text>没有更多记录了...</text></view></block></view></view></block></view></view>