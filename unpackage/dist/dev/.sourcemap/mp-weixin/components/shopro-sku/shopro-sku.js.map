{"version":3,"sources":["webpack:////Users/hfy/Documents/business/1kpdj/yunqishou/components/shopro-sku/shopro-sku.vue?1a51","webpack:////Users/hfy/Documents/business/1kpdj/yunqishou/components/shopro-sku/shopro-sku.vue?505e","webpack:////Users/hfy/Documents/business/1kpdj/yunqishou/components/shopro-sku/shopro-sku.vue?83d1","webpack:////Users/hfy/Documents/business/1kpdj/yunqishou/components/shopro-sku/shopro-sku.vue?eb0e","uni-app:///components/shopro-sku/shopro-sku.vue","webpack:////Users/hfy/Documents/business/1kpdj/yunqishou/components/shopro-sku/shopro-sku.vue?57f1","webpack:////Users/hfy/Documents/business/1kpdj/yunqishou/components/shopro-sku/shopro-sku.vue?7286"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAmI;AACnI;AAC8D;AACL;AACsC;;;AAG/F;AACmN;AACnN,gBAAgB,iNAAU;AAC1B,EAAE,gFAAM;AACR,EAAE,iGAAM;AACR,EAAE,0GAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,qGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,6MAEN;AACP,KAAK;AACL;AACA,aAAa,2OAEN;AACP;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC3CA;AAAA;AAAA;AAAA;AAAu1B,CAAgB,wyBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACyE32B,gD;AACA;AACA,gBADA;AAEA,MAFA,kBAEA;AACA;AACA,qBADA;AAEA,iBAFA;AAGA,yBAHA;AAIA,yBAJA;AAKA,iBALA;AAMA,0BANA;AAOA,wBAPA;;AASA,GAZA;AAaA;AACA,iBADA;AAEA,qBAFA;AAGA,aAHA;AAIA;AACA,kBADA;AAEA,oBAFA,EAJA;;AAQA;AACA,kBADA;AAEA,sBAFA,EARA;;AAYA;AACA,kBADA;AAEA,sBAFA,EAZA;;AAgBA;AACA;AACA,kBAFA;AAGA,gBAHA,EAhBA,EAbA;;;AAmCA,SAnCA,qBAmCA;AACA;AACA;AACA,GAtCA;AAuCA,SAvCA,qBAuCA;AACA;AACA;AACA;AACA;AACA;AACA,GA7CA;AA8CA;AACA,QADA,gBACA,MADA,EACA,MADA,EACA;AACA;AACA,KAHA,EA9CA;;AAmDA;AACA,YADA,sBACA;AACA;AACA,KAHA;AAIA;AACA,SADA,iBACA;AACA;AACA,OAHA;AAIA,SAJA,eAIA,GAJA,EAIA;AACA;AACA;AACA,OAPA,EAJA;;AAaA,kBAbA,4BAaA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAJA;AAKA,SANA;AAOA,OARA;AASA;AACA;AACA,KA5BA,EAnDA;;;AAkFA;AACA,wDADA;AAEA,QAFA,gBAEA,IAFA,EAEA,MAFA,EAEA;AACA;AACA,kBADA;AAEA,qBAFA;;AAIA,KAPA;;AASA;AACA,aAVA,qBAUA,GAVA,EAUA,KAVA,EAUA;AACA;AACA,2BAFA,CAEA;AACA,wBAHA,CAGA;AACA,4BAJA,CAIA;;AAEA;AACA;AACA;AACA;AACA,OAJA,MAIA;AACA;AACA;AACA;;AAEA,2BAfA,CAeA;AACA;AACA;AACA;AACA;AACA;AACA,OALA;;AAOA;AACA;;AAEA;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA;;AAEA;AACA;AACA,KA7CA;;AA+CA;AACA,kBAhDA,4BAgDA;AACA,wBADA,CACA;;AAEA;AACA;;AAEA;AAHA,mDAIA,aAJA,aAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAZA;AAaA,OAbA,MAaA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,8BAxBA;AAyBA,cAzBA,cAyBA;AACA;AACA;;AAEA;AA7BA,kEA8BA;;AAEA;AACA;AACA;AACA;AACA,OAJA,MAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SATA;AAUA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SALA;AAMA,OARA,MAQA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAFA,MAEA;AACA;AACA;AACA;AACA;AACA,KAhIA;AAiIA;AACA,qBAlIA,+BAkIA;AACA,wBADA;;AAGA,mBAHA,gDAGA,KAHA;AAIA;AACA;AACA;AACA;AACA,qBARA;;AAUA;AACA;AACA;AACA;AACA;AACA,WALA;;AAOA;AACA;AACA,WAnBA,EAGA,4DAKA,IALA,6CAGA;AAcA,SApBA;;AAsBA;AACA,KAzJA;;AA2JA;AACA,aA5JA,qBA4JA,CA5JA,EA4JA;AACA;AACA,KA9JA;AA+JA;AACA,QAhKA,gBAgKA,CAhKA,EAgKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KA9KA;;AAgLA;AACA,eAjLA,yBAiLA;AACA;AACA;AACA;AACA,uCADA;AAEA,uBAFA;;AAIA;AACA;AACA;AACA;AACA;AACA,SALA;AAMA;AACA,KA/LA;AAgMA;AACA,cAjMA,wBAiMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCADA;AAEA,uBAFA;AAGA,mCAHA;AAIA,6CAJA;AAKA,mCALA;;AAOA;AACA,KA/MA;AAgNA;AACA,WAjNA,qBAiNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAPA;;AASA,KA5NA;AA6NA;AACA,cA9NA,wBA8NA;AACA;AACA;AACA;AACA;AACA;AACA,OAJA,MAIA;AACA;AACA;AACA,iDADA;AAEA,mDAFA;AAGA,+CAHA;AAIA,iDAJA;;AAMA;AACA;AACA;AACA,SAHA,MAGA;AACA;AACA;AACA;AACA;AACA,KApPA,GAlFA,E;;;;;;;;;;;;;AC1EA;AAAA;AAAA;AAAA;AAAojD,CAAgB,05CAAG,EAAC,C;;;;;;;;;;;ACAxkD;AACA,OAAO,KAAU,EAAE,kBAKd","file":"components/shopro-sku/shopro-sku.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./shopro-sku.vue?vue&type=template&id=edf15838&scoped=true&\"\nvar renderjs\nimport script from \"./shopro-sku.vue?vue&type=script&lang=js&\"\nexport * from \"./shopro-sku.vue?vue&type=script&lang=js&\"\nimport style0 from \"./shopro-sku.vue?vue&type=style&index=0&id=edf15838&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"edf15838\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"components/shopro-sku/shopro-sku.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./shopro-sku.vue?vue&type=template&id=edf15838&scoped=true&\"","var components\ntry {\n  components = {\n    uPopup: function() {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-popup/u-popup\" */ \"@/uview-ui/components/u-popup/u-popup.vue\"\n      )\n    },\n    uNumberBox: function() {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-number-box/u-number-box\" */ \"@/uview-ui/components/u-number-box/u-number-box.vue\"\n      )\n    }\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  if (!_vm._isMounted) {\n    _vm.e0 = function($event) {\n      _vm.showModal = false\n    }\n  }\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./shopro-sku.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./shopro-sku.vue?vue&type=script&lang=js&\"","<template>\n\t<!-- 规格 -->\n\t<u-popup v-model=\"showModal\" :closeable=\"true\" mode=\"bottom\" close-icon-pos=\"top-right\" border-radius=\"30\" v-if=\"goodsInfo.sku_price\">\n\t\t<view class=\"shop-modal page_box\" :style=\"goodsInfo.is_sku == 0 ? 'height:700rpx' : ''\">\n\t\t\t<!-- 商品卡片-->\n\t\t\t<view class=\"top u-flex modal-head__box\">\n\t\t\t\t<image class=\"shop-img\" :src=\"currentSkuPrice.image ? currentSkuPrice.image : goodsInfo.image\" mode=\"aspectFill\"></image>\n\t\t\t\t<view class=\" goods-box u-flex-col u-row-between\">\n\t\t\t\t\t<view class=\"goods-title u-ellipsis-2\">{{ goodsInfo.title }}</view>\n\t\t\t\t\t<view class=\"u-flex u-row-between goods-bottom\">\n\t\t\t\t\t\t<view class=\"price-box u-flex\">\n\t\t\t\t\t\t\t<view v-if=\"goodsType === 'score'\">{{ currentSkuPrice.price_text || goodsInfo.price }}</view>\n\t\t\t\t\t\t\t<view v-else-if=\"grouponBuyType === 'groupon'\">\n\t\t\t\t\t\t\t\t￥{{ currentSkuPrice.groupon_price || (goodsInfo.activity_type === 'groupon' ? goodsInfo.groupon_price : goodsInfo.price) }}\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t<view v-else>￥{{ currentSkuPrice.price || goodsInfo.price }}</view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<text class=\"stock\">库存{{ currentSkuPrice.stock || goodsInfo.stock }}件</text>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\n\t\t\t<!-- 规格选项 -->\n\t\t\t<scroll-view scroll-y class=\"content_box\">\n\t\t\t\t<view class=\"select-box u-felx-col u-row-left\" v-for=\"(s, x) in skuList\" :key=\"s.id\">\n\t\t\t\t\t<view class=\"type-title\">{{ s.name }}</view>\n\t\t\t\t\t<view class=\"tag-box u-flex u-flex-wrap\">\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclass=\"tag u-reset-button\"\n\t\t\t\t\t\t\tv-for=\"(sc, y) in s.content\"\n\t\t\t\t\t\t\t:key=\"sc.id\"\n\t\t\t\t\t\t\t:class=\"{ 'tag-active': currentSkuArray[sc.pid] == sc.id, 'tag-disabled': sc.disabled == true }\"\n\t\t\t\t\t\t\t:disabled=\"sc.disabled == true\"\n\t\t\t\t\t\t\t@tap=\"chooseSku(sc.pid, sc.id)\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{{ sc.name }}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\n\t\t\t\t<!-- 计步器 -->\n\t\t\t\t<view class=\"buy-num-box u-flex u-row-between\">\n\t\t\t\t\t<view class=\"num-title\">购买数量</view>\n\t\t\t\t\t<u-number-box v-model=\"goodsNum\" :min=\"1\" :step=\"1\" :max=\"maxStep\" disabled-input @plus=\"plus\" @change=\"changeNum\"></u-number-box>\n\t\t\t\t</view>\n\t\t\t</scroll-view>\n\n\t\t\t<!-- 功能按钮 -->\n\t\t\t<view class=\"btn-box foot_box u-flex u-row-between\" v-if=\"buyType === 'cart' || buyType === 'buy'\">\n\t\t\t\t<button class=\"u-reset-button cu-btn save-btn\" v-if=\"(activityRules && activityRules.status === 'ing') || !goodsInfo.activity_type\" @tap=\"confirm\">确认</button>\n\t\t\t\t<button class=\"u-reset-button cu-btn cancel-btn\" v-if=\"activityRules && activityRules.status !== 'ing' && goodsInfo.activity_type\" @tap=\"showModal = false\">\n\t\t\t\t\t确定\n\t\t\t\t</button>\n\t\t\t</view>\n\t\t\t<view class=\"btn-box foot_box u-flex u-row-between\" v-else>\n\t\t\t\t<button class=\"u-reset-button cu-btn  cart-btn\" @tap=\"confirmCart\">加入购物车</button>\n\t\t\t\t<button class=\"u-reset-button cu-btn  buy-btn\" @tap=\"confirmBuy\">立即购买</button>\n\t\t\t</view>\n\t\t</view>\n\t</u-popup>\n</template>\n\n<script>\n/**\n * 多规格组件\n * @property {Object} goodsInfo - 商品数据\n * @property {Boolean} value = showModal - 显隐\n * @property {String} buyType  - 购买方式\n * @property {String} goodsType - 商品类别\n * @property {String} grouponBuyType -拼团商品购买方式\n * @property {Number} grouponId - 拼团ID,分享进入\n * @property {Object} activityRules - 活动状态。\n */\nimport { mapMutations, mapActions, mapState } from 'vuex';\nexport default {\n\tcomponents: {},\n\tdata() {\n\t\treturn {\n\t\t\tmaxStep: 999999,\n\t\t\tskuList: [],\n\t\t\tcurrentSkuPrice: {},\n\t\t\tcurrentSkuArray: [],\n\t\t\tgoodsNum: 1,\n\t\t\tconfirmGoodsInfo: {},\n\t\t\ttype: this.buyType\n\t\t};\n\t},\n\tprops: {\n\t\tgoodsInfo: {},\n\t\tactivityRules: {},\n\t\tvalue: {},\n\t\tbuyType: {\n\t\t\ttype: String,\n\t\t\tdefault: 'sku'\n\t\t},\n\t\tgoodsType: {\n\t\t\ttype: String,\n\t\t\tdefault: 'goods'\n\t\t},\n\t\tgrouponBuyType: {\n\t\t\ttype: String,\n\t\t\tdefault: 'alone'\n\t\t},\n\t\tgrouponId: {\n\t\t\t//参加拼团的时候，传入当前团id;\n\t\t\ttype: Number,\n\t\t\tdefault: 0\n\t\t}\n\t},\n\tcreated() {\n\t\tthis.skuList = this.goodsInfo.sku;\n\t\tthis.changeDisabled(false);\n\t},\n\tmounted() {\n\t\t// 单规格选项\n\t\tif (!this.goodsInfo.is_sku) {\n\t\t\tthis.currentSkuPrice = this.skuPrice[0];\n\t\t\tthis.maxStep = this.skuPrice[0].stock;\n\t\t}\n\t},\n\twatch: {\n\t\ttype(nweVal, oldVal) {\n\t\t\treturn newVal;\n\t\t}\n\t},\n\tcomputed: {\n\t\tskuPrice() {\n\t\t\treturn this.goodsInfo.sku_price;\n\t\t},\n\t\tshowModal: {\n\t\t\tget() {\n\t\t\t\treturn this.value;\n\t\t\t},\n\t\t\tset(val) {\n\t\t\t\tval ? uni.hideTabBar() : uni.showTabBar();\n\t\t\t\tthis.$emit('input', val);\n\t\t\t}\n\t\t},\n\t\tcurrentSkuText() {\n\t\t\tlet that = this;\n\t\t\tlet str = '';\n\t\t\tlet currentSkuArray = this.currentSkuArray;\n\t\t\tcurrentSkuArray.forEach(v => {\n\t\t\t\tthat.skuList.forEach(s => {\n\t\t\t\t\ts.content.forEach(u => {\n\t\t\t\t\t\tif (u.id === v) {\n\t\t\t\t\t\t\tstr += ' ' + u.name;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t\tthat.$emit('getSkuText', str);\n\t\t\treturn str;\n\t\t}\n\t},\n\n\tmethods: {\n\t\t...mapActions(['addCartGoods', 'getCartList']),\n\t\tjump(path, parmas) {\n\t\t\tthis.$Router.push({\n\t\t\t\tpath: path,\n\t\t\t\tquery: parmas\n\t\t\t});\n\t\t},\n\n\t\t// 选择规格\n\t\tchooseSku(pid, skuId) {\n\t\t\tlet that = this;\n\t\t\tlet isChecked = true; // 选中 or 取消选中\n\t\t\tthis.goodsNum = 1; //选择规格时，数量重置为1.\n\t\t\tthis.maxStep = 999999; //选择其他规格时，取消上个规格库存限制\n\n\t\t\tif (that.currentSkuArray[pid] != undefined && that.currentSkuArray[pid] == skuId) {\n\t\t\t\t// 点击已被选中的，删除并填充 ''\n\t\t\t\tisChecked = false;\n\t\t\t\tthat.currentSkuArray.splice(pid, 1, '');\n\t\t\t} else {\n\t\t\t\t// 选中\n\t\t\t\tthat.$set(that.currentSkuArray, pid, skuId);\n\t\t\t}\n\n\t\t\tlet chooseSkuId = []; // 选中的规格大类\n\t\t\tthat.currentSkuArray.forEach(sku => {\n\t\t\t\tif (sku != '') {\n\t\t\t\t\t// sku 为空是反选 填充的\n\t\t\t\t\tchooseSkuId.push(sku);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// 当前所选规格下，所有可以选择的 skuPric\n\t\t\tlet newPrice = this.getCanUseSkuPrice();\n\n\t\t\t// 判断所有规格大类是否选择完成\n\t\t\tif (chooseSkuId.length == that.skuList.length && newPrice.length) {\n\t\t\t\tthat.currentSkuPrice = newPrice[0];\n\t\t\t} else {\n\t\t\t\tthat.currentSkuPrice = {};\n\t\t\t}\n\n\t\t\t// 改变规格项禁用状态\n\t\t\tthis.changeDisabled(isChecked, pid, skuId);\n\t\t},\n\n\t\t// 改变禁用状态\n\t\tchangeDisabled(isChecked = false, pid = 0, skuId = 0) {\n\t\t\tlet newPrice = []; // 所有可以选择的 skuPrice\n\n\t\t\tif (isChecked) {\n\t\t\t\t// 选中规格\n\n\t\t\t\t// 当前点击选中规格下的 所有可用 skuPrice\n\t\t\t\tfor (let price of this.skuPrice) {\n\t\t\t\t\tif (price.stock <= 0) {\n\t\t\t\t\t\t// this.goodsNum 不判断是否大于当前选择数量，在 uni-number-box 判断，并且 取 stock 和 goods_num 的小值\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tif (price.goods_sku_id_arr.indexOf(skuId.toString()) >= 0) {\n\t\t\t\t\t\tnewPrice.push(price);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// 取消选择规格\n\n\t\t\t\t// 当前所选规格下，所有可以选择的 skuPric\n\t\t\t\tnewPrice = this.getCanUseSkuPrice();\n\t\t\t}\n\n\t\t\t// 所有存在并且有库存未选择的规格项 的 子项 id\n\t\t\tlet noChooseSkuIds = [];\n\t\t\tfor (let price of newPrice) {\n\t\t\t\tnoChooseSkuIds = noChooseSkuIds.concat(price.goods_sku_id_arr);\n\t\t\t}\n\n\t\t\t// 去重\n\t\t\tnoChooseSkuIds = Array.from(new Set(noChooseSkuIds));\n\n\t\t\tif (isChecked) {\n\t\t\t\t// 去除当前选中的规格项\n\t\t\t\tlet index = noChooseSkuIds.indexOf(skuId.toString());\n\t\t\t\tnoChooseSkuIds.splice(index, 1);\n\t\t\t} else {\n\t\t\t\t// 循环去除当前已选择的规格项\n\t\t\t\tthis.currentSkuArray.forEach(sku => {\n\t\t\t\t\tif (sku.toString() != '') {\n\t\t\t\t\t\t// sku 为空是反选 填充的\n\t\t\t\t\t\tlet index = noChooseSkuIds.indexOf(sku.toString());\n\t\t\t\t\t\tif (index >= 0) {\n\t\t\t\t\t\t\t// sku 存在于 noChooseSkuIds\n\t\t\t\t\t\t\tnoChooseSkuIds.splice(index, 1);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// 当前已选择的规格大类\n\t\t\tlet chooseSkuKey = [];\n\t\t\tif (!isChecked) {\n\t\t\t\t// 当前已选择的规格大类\n\t\t\t\tthis.currentSkuArray.forEach((sku, key) => {\n\t\t\t\t\tif (sku != '') {\n\t\t\t\t\t\t// sku 为空是反选 填充的\n\t\t\t\t\t\tchooseSkuKey.push(key);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\t// 当前点击选择的规格大类\n\t\t\t\tchooseSkuKey = [pid];\n\t\t\t}\n\n\t\t\tfor (let i in this.skuList) {\n\t\t\t\t// 当前点击的规格，或者取消选择时候 已选中的规格 不进行处理\n\t\t\t\tif (chooseSkuKey.indexOf(this.skuList[i]['id']) >= 0) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tfor (let j in this.skuList[i]['content']) {\n\t\t\t\t\t// 如果当前规格项 id 不存在于有库存的规格项中，则禁用\n\t\t\t\t\tif (noChooseSkuIds.indexOf(this.skuList[i]['content'][j]['id'].toString()) >= 0) {\n\t\t\t\t\t\tthis.skuList[i]['content'][j]['disabled'] = false;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.skuList[i]['content'][j]['disabled'] = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t// 当前所选规格下，获取所有有库存的 skuPrice\n\t\tgetCanUseSkuPrice() {\n\t\t\tlet newPrice = [];\n\n\t\t\tfor (let price of this.skuPrice) {\n\t\t\t\tif (price.stock <= 0) {\n\t\t\t\t\t// || price.stock < this.goodsNum\t\t不判断是否大于当前选择数量，在 uni-number-box 判断，并且 取 stock 和 goods_num 的小值\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tvar isOk = true;\n\n\t\t\t\tthis.currentSkuArray.forEach(sku => {\n\t\t\t\t\t// sku 不为空，并且，这个 条 skuPrice 没有被选中,则排除\n\t\t\t\t\tif (sku.toString() != '' && price.goods_sku_id_arr.indexOf(sku.toString()) < 0) {\n\t\t\t\t\t\tisOk = false;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tif (isOk) {\n\t\t\t\t\tnewPrice.push(price);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn newPrice;\n\t\t},\n\n\t\t// 数量\n\t\tchangeNum(e) {\n\t\t\tthis.changeDisabled(false);\n\t\t},\n\t\t// 增加\n\t\tplus(e) {\n\t\t\tif (e.value >= this.currentSkuPrice.stock) {\n\t\t\t\tthis.maxStep = this.currentSkuPrice.stock;\n\t\t\t\tthis.$u.toast('库存不足');\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (this.goodsInfo.activity_type === 'seckill' || this.goodsInfo.activity_type === 'groupon') {\n\t\t\t\tlet rules = this.goodsInfo.activity.rules;\n\t\t\t\tif (rules.limit_buy != 0 && e.value >= rules.limit_buy) {\n\t\t\t\t\tthis.maxStep = rules.limit_buy;\n\t\t\t\t\tthis.$u.toast('本次活动最多购买' + rules.limit_buy + '件');\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t// 加入购物车确定\n\t\tconfirmCart() {\n\t\t\tlet that = this;\n\t\t\tif (this.confirmSku()) {\n\t\t\t\tlet confirmGoodsList = {\n\t\t\t\t\tlist: [that.confirmGoodsInfo],\n\t\t\t\t\tfrom: 'goods'\n\t\t\t\t};\n\t\t\t\tthat.addCartGoods(confirmGoodsList).then(res => {\n\t\t\t\t\tif (res.code === 1) {\n\t\t\t\t\t\tthat.showModal = false;\n\t\t\t\t\t\tthat.$u.toast(res.msg);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t// 立即购买\n\t\tconfirmBuy() {\n\t\t\tlet that = this;\n\t\t\tthat.showModal = false;\n\t\t\tif (this.confirmSku()) {\n\t\t\t\tlet confirmGoodsList = [];\n\t\t\t\tconfirmGoodsList.push(that.confirmGoodsInfo);\n\t\t\t\tthat.jump('/pages/order/confirm', {\n\t\t\t\t\tgoodsList: confirmGoodsList,\n\t\t\t\t\tfrom: 'goods',\n\t\t\t\t\torderType: that.goodsType,\n\t\t\t\t\tgrouponBuyType: that.grouponBuyType,\n\t\t\t\t\tgrouponId: that.grouponId\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t// 确定\n\t\tconfirm() {\n\t\t\tthis.confirmSku();\n\t\t\tswitch (this.buyType) {\n\t\t\t\tcase 'cart':\n\t\t\t\t\tthis.confirmCart();\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'buy':\n\t\t\t\t\tthis.confirmBuy();\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t}\n\t\t},\n\t\t// 确定规格\n\t\tconfirmSku() {\n\t\t\tlet that = this;\n\t\t\tif (that.currentSkuPrice.stock == 0 || that.currentSkuPrice.stock < that.goodsNum) {\n\t\t\t\tthat.$u.toast('库存不足');\n\t\t\t\tthat.showModal = false;\n\t\t\t\treturn false;\n\t\t\t} else {\n\t\t\t\tthat.currentSkuPrice.goods_num = that.goodsNum;\n\t\t\t\tthat.confirmGoodsInfo = {\n\t\t\t\t\tgoods_id: that.currentSkuPrice.goods_id,\n\t\t\t\t\tgoods_num: that.currentSkuPrice.goods_num,\n\t\t\t\t\tsku_price_id: that.currentSkuPrice.id,\n\t\t\t\t\tgoods_price: that.currentSkuPrice.price\n\t\t\t\t};\n\t\t\t\tif (!that.confirmGoodsInfo.sku_price_id) {\n\t\t\t\t\tthat.$u.toast('请选择规格');\n\t\t\t\t\treturn false;\n\t\t\t\t} else {\n\t\t\t\t\tthat.showModal = false;\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.size-box {\n\tline-height: 82rpx;\n\tbackground: #fff;\n\tpadding: 0 20rpx;\n\tmargin: 20rpx 0;\n\tfont-size: 28rpx;\n\n\t.title {\n\t\tcolor: #999;\n\t\tmargin-right: 20rpx;\n\t}\n\n\t.cuIcon-right {\n\t\tcolor: #bfbfbf;\n\t\tfont-size: 36rpx;\n\t}\n}\n\n// 规格\n.shop-modal {\n\twidth: 750rpx;\n\theight: 950rpx;\n\tbackground: rgba(255, 255, 255, 1);\n\tpadding: 20rpx 20rpx 30rpx;\n\t// 商品卡片\n\t.top {\n\t\tmargin: 30rpx 0;\n\t\tborder-radius: 20rpx;\n\t\tpadding: 20rpx;\n\n\t\t.shop-img {\n\t\t\twidth: 160upx;\n\t\t\theight: 160upx;\n\t\t\tborder-radius: 6upx;\n\t\t\tmargin-right: 30upx;\n\t\t\tbackground: #ccc;\n\t\t}\n\n\t\t.goods-box {\n\t\t\theight: 160upx;\n\t\t\twidth: 490rpx;\n\t\t\talign-items: flex-start;\n\n\t\t\t.goods-title {\n\t\t\t\tfont-size: 28rpx;\n\n\t\t\t\tfont-weight: 500;\n\t\t\t\tcolor: rgba(51, 51, 51, 1);\n\t\t\t\tline-height: 42rpx;\n\t\t\t\ttext-align: left;\n\t\t\t}\n\n\t\t\t.goods-bottom {\n\t\t\t\twidth: 100%;\n\t\t\t}\n\n\t\t\t.price-box {\n\t\t\t\tfont-size: 36upx;\n\n\t\t\t\tfont-weight: bold;\n\t\t\t\tcolor: #e1212b;\n\n\t\t\t\t.unit {\n\t\t\t\t\tfont-size: 24upx;\n\n\t\t\t\t\tfont-weight: bold;\n\t\t\t\t\tcolor: #e1212b;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t.stock {\n\t\t\t\tfont-size: 26rpx;\n\t\t\t\tcolor: #999;\n\t\t\t}\n\t\t}\n\t}\n\n\t// 规格选项\n\t.select-box {\n\t\tmargin-bottom: 30rpx;\n\t\t.type-title {\n\t\t\tfont-size: 26upx;\n\t\t\tfont-weight: 400;\n\t\t\tmargin-bottom: 20upx;\n\t\t}\n\t\t.tag-box {\n\t\t\tflex-wrap: wrap;\n\t\t}\n\t\t.tag {\n\t\t\tline-height: 62rpx;\n\t\t\tbackground: #f4f4f4;\n\t\t\tborder-radius: 31rpx;\n\t\t\tfont-size: 28upx;\n\t\t\tfont-weight: 400;\n\t\t\tcolor: #666666;\n\t\t\tpadding: 0 30upx;\n\t\t\tmargin-bottom: 20rpx;\n\t\t\tmargin-right: 10rpx;\n\t\t}\n\n\t\t.tag-active {\n\t\t\tbackground: linear-gradient(90deg, #e9b461, #eecc89);\n\t\t\tfont-size: 28rpx;\n\t\t\tfont-weight: 400;\n\t\t\tcolor: #ffffff;\n\t\t}\n\n\t\t.tag-disabled {\n\t\t\tbackground: #f8f8f8;\n\t\t\tcolor: #cacaca;\n\t\t}\n\t}\n\n\t.buy-num-box {\n\t\t.num-title {\n\t\t\tfont-size: 26upx;\n\n\t\t\tfont-weight: 400;\n\t\t\tmargin-bottom: 20upx;\n\t\t}\n\t}\n}\n\n.btn-box {\n\theight: 100rpx;\n\n\t.cu-btn {\n\t\twidth: 340rpx;\n\t\tline-height: 70rpx;\n\t\tborder-radius: 35rpx;\n\t\tfont-size: 28rpx;\n\n\t\tfont-weight: 500;\n\t\tcolor: rgba(255, 255, 255, 0.9);\n\t\tpadding: 0;\n\t}\n\n\t.cart-btn {\n\t\tbackground: linear-gradient(90deg, rgba(103, 104, 105, 1), rgba(82, 82, 82, 1));\n\t\tbox-shadow: 0px 2rpx 5rpx 0px rgba(102, 103, 104, 0.46);\n\t}\n\n\t.buy-btn {\n\t\tbackground: linear-gradient(90deg, rgba(233, 180, 97, 1), rgba(238, 204, 137, 1));\n\t}\n\t.save-btn {\n\t\twidth: 710rpx;\n\t\theight: 70rpx;\n\t\tbackground: linear-gradient(90deg, rgba(233, 180, 97, 1), rgba(238, 204, 137, 1));\n\t\tfont-size: 28rpx;\n\t\tfont-weight: 500;\n\t\tcolor: rgba(255, 255, 255, 1);\n\t\tborder-radius: 35rpx;\n\t\tpadding: 0;\n\t}\n\t.cancel-btn {\n\t\twidth: 710rpx;\n\t\theight: 70rpx;\n\t\tbackground: rgba(221, 221, 221, 1);\n\t\tfont-size: 28rpx;\n\t\tfont-weight: 500;\n\t\tcolor: #999999;\n\t\tborder-radius: 35rpx;\n\t\tpadding: 0;\n\t}\n}\n</style>\n","import mod from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./shopro-sku.vue?vue&type=style&index=0&id=edf15838&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./shopro-sku.vue?vue&type=style&index=0&id=edf15838&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1628145503700\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}